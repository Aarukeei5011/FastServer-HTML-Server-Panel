<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FastServer Minecraft „Çµ„Éº„Éê„Éº„Éë„Éç„É´</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --light: #ecf0f1;
            --dark: #34495e;
            --gray: #95a5a6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--dark));
            color: white;
            padding: 1.5rem 0;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .api-key-display {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--success);
            animation: pulse 2s infinite;
        }
        
        .status-dot.disconnected {
            background-color: var(--danger);
            animation: none;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 1.5rem;
            overflow: hidden;
        }
        
        .card-header {
            background-color: var(--light);
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #ddd;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card-body {
            padding: 1.5rem;
        }
        
        .server-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .server-card {
            border-left: 4px solid var(--secondary);
            transition: transform 0.3s ease;
        }
        
        .server-card:hover {
            transform: translateY(-5px);
        }
        
        .server-info {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }
        
        .server-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .server-detail {
            display: flex;
            justify-content: space-between;
        }
        
        .server-status {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-running {
            background-color: rgba(39, 174, 96, 0.2);
            color: var(--success);
        }
        
        .status-stopped {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }
        
        .status-starting {
            background-color: rgba(243, 156, 18, 0.2);
            color: var(--warning);
        }
        
        .status-stopping {
            background-color: rgba(155, 89, 182, 0.2);
            color: #9b59b6;
        }
        
        .server-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .btn-primary {
            background-color: var(--secondary);
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            background-color: #2980b9;
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-success:hover:not(:disabled) {
            background-color: #219653;
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: white;
        }
        
        .btn-warning:hover:not(:disabled) {
            background-color: #e67e22;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-danger:hover:not(:disabled) {
            background-color: #c0392b;
        }
        
        .btn-sm {
            padding: 0.3rem 0.8rem;
            font-size: 0.85rem;
        }
        
        .console-output {
            background-color: #1e1e1e;
            color: #f0f0f0;
            font-family: 'Courier New', monospace;
            padding: 1rem;
            border-radius: 5px;
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }
        
        .console-line {
            margin-bottom: 0.3rem;
            line-height: 1.4;
        }
        
        .console-input {
            display: flex;
            gap: 0.5rem;
        }
        
        .console-input input {
            flex: 1;
            padding: 0.7rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
        }
        
        .file-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .file-item {
            background-color: var(--light);
            padding: 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .file-item:hover {
            background-color: #dfe6e9;
        }
        
        .file-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--gray);
        }
        
        .file-name {
            font-weight: 600;
            margin-bottom: 0.3rem;
            word-break: break-all;
        }
        
        .file-size {
            font-size: 0.8rem;
            color: var(--gray);
        }
        
        /* „É¢„Éº„ÉÄ„É´„ÅÆ„É¨„Çπ„Éù„É≥„Ç∑„ÉñÊîπÂñÑ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: flex-start;
            justify-content: center;
            overflow-y: auto;
            padding: 20px 0;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            margin: auto;
        }
        
        .modal-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        
        .modal-body {
            padding: 1.5rem;
            overflow-y: auto;
            flex-grow: 1;
        }
        
        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid #ddd;
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
            flex-shrink: 0;
        }
        
        .close {
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .form-control {
            width: 100%;
            padding: 0.7rem;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .alert {
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1rem;
        }
        
        .alert-success {
            background-color: rgba(39, 174, 96, 0.2);
            color: var(--success);
            border-left: 4px solid var(--success);
        }
        
        .alert-error {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--danger);
            border-left: 4px solid var(--danger);
        }
        
        .tab-container {
            margin-bottom: 1.5rem;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 1rem;
            overflow-x: auto;
        }
        
        .tab {
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }
        
        .tab.active {
            border-bottom-color: var(--secondary);
            color: var(--secondary);
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .connection-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 1rem;
        }
        
        .connection-message {
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            background-color: var(--light);
        }
        
        .connection-success {
            background-color: rgba(39, 174, 96, 0.2);
            color: var(--success);
        }
        
        .connection-error {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }
        
        /* Êìç‰Ωú„É≠„Ç∞„ÅÆ„Çπ„Çø„Ç§„É´ */
        .log-container {
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 1rem;
            background-color: #f9f9f9;
        }
        
        .log-entry {
            padding: 0.7rem;
            margin-bottom: 0.5rem;
            border-radius: 5px;
            border-left: 4px solid var(--secondary);
            background-color: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .log-timestamp {
            font-size: 0.8rem;
            color: var(--gray);
            margin-bottom: 0.3rem;
        }
        
        .log-message {
            font-weight: 500;
        }
        
        .log-server {
            display: inline-block;
            background-color: var(--light);
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-size: 0.8rem;
            margin-right: 0.5rem;
        }
        
        .log-type-info {
            border-left-color: var(--secondary);
        }
        
        .log-type-success {
            border-left-color: var(--success);
        }
        
        .log-type-warning {
            border-left-color: var(--warning);
        }
        
        .log-type-error {
            border-left-color: var(--danger);
        }
        
        .log-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .log-filters {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .log-filter-btn {
            padding: 0.3rem 0.8rem;
            border: 1px solid #ddd;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }
        
        .log-filter-btn.active {
            background-color: var(--secondary);
            color: white;
            border-color: var(--secondary);
        }
        
        /* „É≠„Ç∞„Çø„Éñ„ÅÆ„Çπ„Çø„Ç§„É´ */
        .log-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 1rem;
        }
        
        .log-tab {
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }
        
        .log-tab.active {
            border-bottom-color: var(--secondary);
            color: var(--secondary);
            font-weight: 600;
        }
        
        .log-tab-content {
            display: none;
        }
        
        .log-tab-content.active {
            display: block;
        }
        
        /* „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„ÅÆ„Çπ„Çø„Ç§„É´ */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            text-align: center;
            border-top: 4px solid var(--secondary);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        /* „ÇØ„Ç§„ÉÉ„ÇØ„Ç¢„ÇØ„Ç∑„Éß„É≥„ÅÆ„Çπ„Çø„Ç§„É´ */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .quick-action-btn {
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 1.5rem 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }
        
        .quick-action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-color: var(--secondary);
        }
        
        .quick-action-icon {
            font-size: 2rem;
            color: var(--secondary);
        }
        
        .quick-action-label {
            font-weight: 600;
        }
        
        /* „Éó„É¨„Ç§„É§„Éº„É™„Çπ„Éà„ÅÆ„Çπ„Çø„Ç§„É´ */
        .player-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .player-card {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            text-align: center;
            border-left: 4px solid var(--success);
        }
        
        .player-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .player-info {
            font-size: 0.8rem;
            color: var(--gray);
        }
        
        /* „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÁÆ°ÁêÜ„ÅÆ„Çπ„Çø„Ç§„É´ */
        .backup-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .backup-card {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--warning);
        }
        
        .backup-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .backup-info {
            font-size: 0.8rem;
            color: var(--gray);
            margin-bottom: 0.5rem;
        }
        
        /* Ë®≠ÂÆö„ÅÆ„Çπ„Çø„Ç§„É´ */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .setting-group {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .setting-title {
            font-weight: 600;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--success);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        /* „Çπ„Éû„ÉõÂêë„Åë„ÅÆË®≠ÂÆö */
        @media (max-width: 768px) {
            .server-list {
                grid-template-columns: 1fr;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .header-controls {
                flex-direction: column;
                width: 100%;
            }
            
            .api-key-display {
                max-width: 100%;
            }
            
            .server-actions {
                flex-wrap: wrap;
            }
            
            .tabs, .log-tabs {
                flex-wrap: wrap;
            }
            
            .dashboard-stats, .quick-actions {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .modal {
                padding: 10px;
                align-items: stretch;
            }
            
            .modal-content {
                width: 100%;
                max-height: 95vh;
            }
            
            .modal-header,
            .modal-body,
            .modal-footer {
                padding: 1rem;
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .setting-group {
                padding: 1rem;
            }
        }
        
        /* „Åï„Çâ„Å´Â∞è„Åï„Å™ÁîªÈù¢Âêë„Åë */
        @media (max-width: 480px) {
            .modal {
                padding: 5px;
            }
            
            .modal-content {
                max-height: 98vh;
            }
            
            .modal-header h3 {
                font-size: 1.2rem;
            }
            
            .modal-footer {
                flex-direction: column;
            }
            
            .modal-footer .btn {
                width: 100%;
                margin-bottom: 0.5rem;
            }
            
            .dashboard-stats, .quick-actions {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">FastServer Minecraft „Çµ„Éº„Éê„Éº„Éë„Éç„É´</div>
                <div class="header-controls">
                    <div class="api-key-display" id="api-key-display">
                        API„Ç≠„Éº„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì
                    </div>
                    <button class="btn btn-primary btn-sm" id="settings-btn">Ë®≠ÂÆö</button>
                    <div class="status-indicator">
                        <div class="status-dot" id="status-dot"></div>
                        <span id="status-text">Êé•Á∂öÁ¢∫Ë™ç‰∏≠...</span>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="connection-status" id="connection-status" style="display: none;">
            <!-- Êé•Á∂ö„Çπ„ÉÜ„Éº„Çø„Çπ„É°„ÉÉ„Çª„Éº„Ç∏„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
        </div>
        
        <div class="tab-container">
            <div class="tabs">
                <div class="tab active" data-tab="dashboard">„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</div>
                <div class="tab" data-tab="servers">„Çµ„Éº„Éê„ÉºÁÆ°ÁêÜ</div>
                <div class="tab" data-tab="console">„Ç≥„É≥„ÇΩ„Éº„É´</div>
                <div class="tab" data-tab="files">„Éï„Ç°„Ç§„É´ÁÆ°ÁêÜ</div>
                <div class="tab" data-tab="players">„Éó„É¨„Ç§„É§„ÉºÁÆ°ÁêÜ</div>
                <div class="tab" data-tab="backups">„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó</div>
                <div class="tab" data-tab="jobs">„Ç∏„Éß„ÉñÁÆ°ÁêÜ</div>
                <div class="tab" data-tab="logs">Êìç‰Ωú„É≠„Ç∞</div>
            </div>
            
            <!-- „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Çø„Éñ -->
            <div class="tab-content active" id="dashboard-tab">
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="total-servers">0</div>
                        <div class="stat-label">„Çµ„Éº„Éê„ÉºÊï∞</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="running-servers">0</div>
                        <div class="stat-label">Á®ºÂÉç‰∏≠„Çµ„Éº„Éê„Éº</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-players">0</div>
                        <div class="stat-label">„Ç™„É≥„É©„Ç§„É≥„Éó„É¨„Ç§„É§„Éº</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="active-jobs">0</div>
                        <div class="stat-label">ÂÆüË°å‰∏≠„Ç∏„Éß„Éñ</div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <span>„ÇØ„Ç§„ÉÉ„ÇØ„Ç¢„ÇØ„Ç∑„Éß„É≥</span>
                    </div>
                    <div class="card-body">
                        <div class="quick-actions">
                            <div class="quick-action-btn" id="quick-restart-all">
                                <div class="quick-action-icon">üîÑ</div>
                                <div class="quick-action-label">ÂÖ®„Çµ„Éº„Éê„ÉºÂÜçËµ∑Âãï</div>
                            </div>
                            <div class="quick-action-btn" id="quick-stop-all">
                                <div class="quick-action-icon">‚èπÔ∏è</div>
                                <div class="quick-action-label">ÂÖ®„Çµ„Éº„Éê„ÉºÂÅúÊ≠¢</div>
                            </div>
                            <div class="quick-action-btn" id="quick-backup">
                                <div class="quick-action-icon">üíæ</div>
                                <div class="quick-action-label">„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰ΩúÊàê</div>
                            </div>
                            <div class="quick-action-btn" id="quick-cleanup">
                                <div class="quick-action-icon">üßπ</div>
                                <div class="quick-action-label">„É≠„Ç∞„ÇØ„É™„É≥„Éä„ÉÉ„Éó</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <span>„Çµ„Éº„Éê„Éº„Çπ„ÉÜ„Éº„Çø„Çπ</span>
                        <button class="btn btn-primary btn-sm" id="refresh-dashboard">Êõ¥Êñ∞</button>
                    </div>
                    <div class="card-body">
                        <div class="server-list" id="dashboard-server-list">
                            <!-- „Çµ„Éº„Éê„Éº„Ç´„Éº„Éâ„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Åæ„Åô -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- „Çµ„Éº„Éê„ÉºÁÆ°ÁêÜ„Çø„Éñ -->
            <div class="tab-content" id="servers-tab">
                <div class="card">
                    <div class="card-header">
                        <span>„Çµ„Éº„Éê„Éº‰∏ÄË¶ß</span>
                        <button class="btn btn-primary btn-sm" id="refresh-servers">
                            <span class="loading" id="refresh-loading" style="display: none;"></span>
                            Êõ¥Êñ∞
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="server-list" id="server-list">
                            <!-- „Çµ„Éº„Éê„Éº„Ç´„Éº„Éâ„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Åæ„Åô -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- „Ç≥„É≥„ÇΩ„Éº„É´„Çø„Éñ -->
            <div class="tab-content" id="console-tab">
                <div class="card">
                    <div class="card-header">
                        <span>„Çµ„Éº„Éê„Éº„Ç≥„É≥„ÇΩ„Éº„É´</span>
                        <select id="console-server-select">
                            <option value="">„Çµ„Éº„Éê„Éº„ÇíÈÅ∏Êäû...</option>
                        </select>
                    </div>
                    <div class="card-body">
                        <div class="console-output" id="console-output">
                            <div class="console-line">„Çµ„Éº„Éê„Éº„ÇíÈÅ∏Êäû„Åô„Çã„Å®„Ç≥„É≥„ÇΩ„Éº„É´Âá∫Âäõ„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô</div>
                        </div>
                        <div class="console-input">
                            <input type="text" id="console-input" placeholder="„Ç≥„Éû„É≥„Éâ„ÇíÂÖ•Âäõ..." disabled>
                            <button class="btn btn-primary" id="send-command" disabled>ÈÄÅ‰ø°</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- „Éï„Ç°„Ç§„É´ÁÆ°ÁêÜ„Çø„Éñ -->
            <div class="tab-content" id="files-tab">
                <div class="card">
                    <div class="card-header">
                        <span>„Éï„Ç°„Ç§„É´„Éñ„É©„Ç¶„Ç∂</span>
                        <div>
                            <select id="files-server-select">
                                <option value="">„Çµ„Éº„Éê„Éº„ÇíÈÅ∏Êäû...</option>
                            </select>
                            <button class="btn btn-primary btn-sm" id="refresh-files">Êõ¥Êñ∞</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="file-list" id="file-list">
                            <!-- „Éï„Ç°„Ç§„É´„É™„Çπ„Éà„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Åæ„Åô -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- „Éó„É¨„Ç§„É§„ÉºÁÆ°ÁêÜ„Çø„Éñ -->
            <div class="tab-content" id="players-tab">
                <div class="card">
                    <div class="card-header">
                        <span>„Éó„É¨„Ç§„É§„ÉºÁÆ°ÁêÜ</span>
                        <select id="players-server-select">
                            <option value="">„Çµ„Éº„Éê„Éº„ÇíÈÅ∏Êäû...</option>
                        </select>
                    </div>
                    <div class="card-body">
                        <div class="player-list" id="player-list">
                            <!-- „Éó„É¨„Ç§„É§„Éº„É™„Çπ„Éà„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Åæ„Åô -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Çø„Éñ -->
            <div class="tab-content" id="backups-tab">
                <div class="card">
                    <div class="card-header">
                        <span>„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÁÆ°ÁêÜ</span>
                        <button class="btn btn-primary btn-sm" id="create-backup">„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰ΩúÊàê</button>
                    </div>
                    <div class="card-body">
                        <div class="backup-list" id="backup-list">
                            <!-- „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„É™„Çπ„Éà„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Åæ„Åô -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- „Ç∏„Éß„ÉñÁÆ°ÁêÜ„Çø„Éñ -->
            <div class="tab-content" id="jobs-tab">
                <div class="card">
                    <div class="card-header">
                        <span>ÂÆüË°å‰∏≠„ÅÆ„Ç∏„Éß„Éñ</span>
                        <button class="btn btn-primary btn-sm" id="refresh-jobs">Êõ¥Êñ∞</button>
                    </div>
                    <div class="card-body">
                        <div id="jobs-list">
                            <!-- „Ç∏„Éß„Éñ„É™„Çπ„Éà„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Åæ„Åô -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Êìç‰Ωú„É≠„Ç∞„Çø„Éñ -->
            <div class="tab-content" id="logs-tab">
                <div class="card">
                    <div class="card-header">
                        <span>Êìç‰Ωú„É≠„Ç∞</span>
                        <div>
                            <button class="btn btn-primary btn-sm" id="refresh-logs">Êõ¥Êñ∞</button>
                            <button class="btn btn-danger btn-sm" id="clear-logs">„É≠„Ç∞„Çí„ÇØ„É™„Ç¢</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <!-- „É≠„Ç∞„Çø„Éñ -->
                        <div class="log-tabs">
                            <div class="log-tab active" data-log-tab="all">„Åô„Åπ„Å¶„ÅÆ„É≠„Ç∞</div>
                            <div class="log-tab" data-log-tab="server">„Çµ„Éº„Éê„ÉºÊìç‰Ωú</div>
                            <div class="log-tab" data-log-tab="file">„Éï„Ç°„Ç§„É´Êìç‰Ωú</div>
                            <div class="log-tab" data-log-tab="command">„Ç≥„Éû„É≥„Éâ</div>
                            <div class="log-tab" data-log-tab="system">„Ç∑„Çπ„ÉÜ„É†</div>
                        </div>
                        
                        <!-- „Åô„Åπ„Å¶„ÅÆ„É≠„Ç∞ -->
                        <div class="log-tab-content active" id="log-tab-all">
                            <div class="log-container" id="log-container-all">
                                <!-- „Åô„Åπ„Å¶„ÅÆ„É≠„Ç∞„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
                            </div>
                        </div>
                        
                        <!-- „Çµ„Éº„Éê„ÉºÊìç‰Ωú„É≠„Ç∞ -->
                        <div class="log-tab-content" id="log-tab-server">
                            <div class="log-container" id="log-container-server">
                                <!-- „Çµ„Éº„Éê„ÉºÊìç‰Ωú„É≠„Ç∞„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
                            </div>
                        </div>
                        
                        <!-- „Éï„Ç°„Ç§„É´Êìç‰Ωú„É≠„Ç∞ -->
                        <div class="log-tab-content" id="log-tab-file">
                            <div class="log-container" id="log-container-file">
                                <!-- „Éï„Ç°„Ç§„É´Êìç‰Ωú„É≠„Ç∞„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
                            </div>
                        </div>
                        
                        <!-- „Ç≥„Éû„É≥„Éâ„É≠„Ç∞ -->
                        <div class="log-tab-content" id="log-tab-command">
                            <div class="log-container" id="log-container-command">
                                <!-- „Ç≥„Éû„É≥„Éâ„É≠„Ç∞„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
                            </div>
                        </div>
                        
                        <!-- „Ç∑„Çπ„ÉÜ„É†„É≠„Ç∞ -->
                        <div class="log-tab-content" id="log-tab-system">
                            <div class="log-container" id="log-container-system">
                                <!-- „Ç∑„Çπ„ÉÜ„É†„É≠„Ç∞„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
                            </div>
                        </div>
                        
                        <div class="log-actions">
                            <button class="btn btn-primary btn-sm" id="export-logs">„É≠„Ç∞„Çí„Ç®„ÇØ„Çπ„Éù„Éº„Éà</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- „Ç¢„É©„Éº„ÉàË°®Á§∫„Ç®„É™„Ç¢ -->
        <div id="alert-area"></div>
    </div>
    
    <!-- „Çµ„Éº„Éê„ÉºË©≥Á¥∞„É¢„Éº„ÉÄ„É´ -->
    <div class="modal" id="server-detail-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-server-name">„Çµ„Éº„Éê„ÉºË©≥Á¥∞</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="server-info" id="modal-server-info">
                    <!-- „Çµ„Éº„Éê„ÉºË©≥Á¥∞ÊÉÖÂ†±„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Åæ„Åô -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="modal-start-btn">Ëµ∑Âãï</button>
                <button class="btn btn-warning" id="modal-restart-btn">ÂÜçËµ∑Âãï</button>
                <button class="btn btn-danger" id="modal-stop-btn">ÂÅúÊ≠¢</button>
            </div>
        </div>
    </div>
    
    <!-- Ë®≠ÂÆö„É¢„Éº„ÉÄ„É´ -->
    <div class="modal" id="settings-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ë®≠ÂÆö</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="settings-grid">
                    <div class="setting-group">
                        <div class="setting-title">APIË®≠ÂÆö</div>
                        <div class="form-group">
                            <label for="api-base-url">API„Éô„Éº„ÇπURL</label>
                            <input type="text" id="api-base-url" class="form-control" value="http://localhost:4001/api">
                        </div>
                        <div class="form-group">
                            <label for="api-key-input">API„Ç≠„Éº</label>
                            <input type="password" id="api-key-input" class="form-control" placeholder="API„Ç≠„Éº„ÇíÂÖ•Âäõ">
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="save-settings">
                                Ë®≠ÂÆö„Çí‰øùÂ≠ò„Åô„Çã
                            </label>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <div class="setting-title">Ë°®Á§∫Ë®≠ÂÆö</div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="auto-refresh" checked>
                                Ëá™ÂãïÊõ¥Êñ∞„ÇíÊúâÂäπ„Å´„Åô„Çã
                            </label>
                        </div>
                        <div class="form-group">
                            <label for="refresh-interval">Êõ¥Êñ∞ÈñìÈöîÔºàÁßíÔºâ</label>
                            <input type="number" id="refresh-interval" class="form-control" value="30" min="5" max="300">
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="dark-mode">
                                „ÉÄ„Éº„ÇØ„É¢„Éº„Éâ
                            </label>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <div class="setting-title">ÈÄöÁü•Ë®≠ÂÆö</div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="notify-server-status">
                                „Çµ„Éº„Éê„Éº„Çπ„ÉÜ„Éº„Çø„ÇπÂ§âÊõ¥ÊôÇ„Å´ÈÄöÁü•
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="notify-backup-complete">
                                „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÂÆå‰∫ÜÊôÇ„Å´ÈÄöÁü•
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="notify-errors">
                                „Ç®„É©„ÉºÁô∫ÁîüÊôÇ„Å´ÈÄöÁü•
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="save-settings-btn">‰øùÂ≠ò„Åó„Å¶Êé•Á∂ö</button>
                <button class="btn" id="cancel-settings-btn">„Ç≠„É£„É≥„Çª„É´</button>
            </div>
        </div>
    </div>

    <script>
        // Ë®≠ÂÆö
        let API_BASE_URL = 'http://localhost:4001/api';
        let API_KEY = '';
        let AUTO_REFRESH = true;
        let REFRESH_INTERVAL = 30;
        let refreshIntervalId = null;
        
        // „Ç∞„É≠„Éº„Éê„É´Áä∂ÊÖã
        let currentServerId = null;
        let currentPath = '';
        let consoleInterval = null;
        let isConnected = false;
        let operationLogs = [];
        let currentLogTab = 'all';
        
        // DOMË¶ÅÁ¥†
        const serverListEl = document.getElementById('server-list');
        const dashboardServerListEl = document.getElementById('dashboard-server-list');
        const consoleOutputEl = document.getElementById('console-output');
        const consoleInputEl = document.getElementById('console-input');
        const sendCommandBtn = document.getElementById('send-command');
        const fileListEl = document.getElementById('file-list');
        const playerListEl = document.getElementById('player-list');
        const backupListEl = document.getElementById('backup-list');
        const jobsListEl = document.getElementById('jobs-list');
        const alertAreaEl = document.getElementById('alert-area');
        const serverDetailModal = document.getElementById('server-detail-modal');
        const modalServerName = document.getElementById('modal-server-name');
        const modalServerInfo = document.getElementById('modal-server-info');
        const modalStartBtn = document.getElementById('modal-start-btn');
        const modalRestartBtn = document.getElementById('modal-restart-btn');
        const modalStopBtn = document.getElementById('modal-stop-btn');
        const settingsModal = document.getElementById('settings-modal');
        const apiKeyDisplay = document.getElementById('api-key-display');
        const statusDot = document.getElementById('status-dot');
        const statusText = document.getElementById('status-text');
        const connectionStatus = document.getElementById('connection-status');
        
        // „Çø„ÉñÂàá„ÇäÊõø„Åà
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // „Åô„Åπ„Å¶„ÅÆ„Çø„Éñ„Å®„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíÈùû„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å´
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // „ÇØ„É™„ÉÉ„ÇØ„Åï„Çå„Åü„Çø„Éñ„Å®ÂØæÂøú„Åô„Çã„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Çí„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å´
                tab.classList.add('active');
                document.getElementById(`${tab.dataset.tab}-tab`).classList.add('active');
                
                // „Çø„ÉñÂõ∫Êúâ„ÅÆÂàùÊúüÂåñ
                if (tab.dataset.tab === 'dashboard') {
                    loadDashboard();
                } else if (tab.dataset.tab === 'servers') {
                    loadServers();
                } else if (tab.dataset.tab === 'console') {
                    initConsole();
                } else if (tab.dataset.tab === 'files') {
                    initFiles();
                } else if (tab.dataset.tab === 'players') {
                    loadPlayers();
                } else if (tab.dataset.tab === 'backups') {
                    loadBackups();
                } else if (tab.dataset.tab === 'jobs') {
                    loadJobs();
                } else if (tab.dataset.tab === 'logs') {
                    loadLogs();
                }
            });
        });
        
        // „É≠„Ç∞„Çø„ÉñÂàá„ÇäÊõø„Åà
        document.querySelectorAll('.log-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // „Åô„Åπ„Å¶„ÅÆ„É≠„Ç∞„Çø„Éñ„Å®„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíÈùû„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å´
                document.querySelectorAll('.log-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.log-tab-content').forEach(c => c.classList.remove('active'));
                
                // „ÇØ„É™„ÉÉ„ÇØ„Åï„Çå„Åü„É≠„Ç∞„Çø„Éñ„Å®ÂØæÂøú„Åô„Çã„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Çí„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å´
                tab.classList.add('active');
                document.getElementById(`log-tab-${tab.dataset.logTab}`).classList.add('active');
                
                currentLogTab = tab.dataset.logTab;
                renderLogs();
            });
        });
        
        // Ë®≠ÂÆö„ÅÆË™≠„ÅøËæº„Åø
        function loadSettings() {
            const savedSettings = localStorage.getItem('fastserver-settings');
            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                API_BASE_URL = settings.apiBaseUrl || API_BASE_URL;
                API_KEY = settings.apiKey || '';
                AUTO_REFRESH = settings.autoRefresh !== undefined ? settings.autoRefresh : true;
                REFRESH_INTERVAL = settings.refreshInterval || 30;
                
                // Ë®≠ÂÆö„Éï„Ç©„Éº„É†„Å´ÂÄ§„ÇíË®≠ÂÆö
                document.getElementById('api-base-url').value = API_BASE_URL;
                document.getElementById('api-key-input').value = API_KEY;
                document.getElementById('save-settings').checked = true;
                document.getElementById('auto-refresh').checked = AUTO_REFRESH;
                document.getElementById('refresh-interval').value = REFRESH_INTERVAL;
                
                updateApiKeyDisplay();
                
                // Êé•Á∂ö„ÉÜ„Çπ„Éà
                if (API_KEY) {
                    testConnection();
                }
                
                // Ëá™ÂãïÊõ¥Êñ∞„ÅÆË®≠ÂÆö
                setupAutoRefresh();
            } else {
                // Ë®≠ÂÆö„Åå‰øùÂ≠ò„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà„ÅØË®≠ÂÆö„É¢„Éº„ÉÄ„É´„ÇíË°®Á§∫
                setTimeout(() => {
                    settingsModal.style.display = 'flex';
                }, 500);
            }
            
            // Êìç‰Ωú„É≠„Ç∞„ÅÆË™≠„ÅøËæº„Åø
            loadOperationLogs();
        }
        
        // Ëá™ÂãïÊõ¥Êñ∞„ÅÆË®≠ÂÆö
        function setupAutoRefresh() {
            if (refreshIntervalId) {
                clearInterval(refreshIntervalId);
            }
            
            if (AUTO_REFRESH && isConnected) {
                refreshIntervalId = setInterval(() => {
                    const activeTab = document.querySelector('.tab.active').dataset.tab;
                    if (activeTab === 'dashboard') {
                        loadDashboard();
                    } else if (activeTab === 'servers') {
                        loadServers();
                    } else if (activeTab === 'jobs') {
                        loadJobs();
                    }
                }, REFRESH_INTERVAL * 1000);
            }
        }
        
        // Ë®≠ÂÆö„ÅÆ‰øùÂ≠ò
        function saveSettings() {
            const apiBaseUrl = document.getElementById('api-base-url').value;
            const apiKey = document.getElementById('api-key-input').value;
            const saveSettings = document.getElementById('save-settings').checked;
            const autoRefresh = document.getElementById('auto-refresh').checked;
            const refreshInterval = parseInt(document.getElementById('refresh-interval').value);
            
            API_BASE_URL = apiBaseUrl;
            API_KEY = apiKey;
            AUTO_REFRESH = autoRefresh;
            REFRESH_INTERVAL = refreshInterval;
            
            if (saveSettings) {
                const settings = {
                    apiBaseUrl: API_BASE_URL,
                    apiKey: API_KEY,
                    autoRefresh: AUTO_REFRESH,
                    refreshInterval: REFRESH_INTERVAL
                };
                localStorage.setItem('fastserver-settings', JSON.stringify(settings));
            } else {
                localStorage.removeItem('fastserver-settings');
            }
            
            updateApiKeyDisplay();
            settingsModal.style.display = 'none';
            
            // Êé•Á∂ö„ÉÜ„Çπ„Éà
            testConnection();
            
            // Ëá™ÂãïÊõ¥Êñ∞„ÅÆË®≠ÂÆö
            setupAutoRefresh();
            
            // „É≠„Ç∞„Å´Ë®òÈå≤
            addLogEntry('system', 'info', 'Ë®≠ÂÆö„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü');
        }
        
        // API„Ç≠„ÉºË°®Á§∫„ÅÆÊõ¥Êñ∞
        function updateApiKeyDisplay() {
            if (API_KEY) {
                const maskedKey = API_KEY.substring(0, 4) + '‚Ä¢'.repeat(8) + API_KEY.substring(API_KEY.length - 4);
                apiKeyDisplay.textContent = maskedKey;
                apiKeyDisplay.title = API_KEY;
            } else {
                apiKeyDisplay.textContent = 'API„Ç≠„Éº„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì';
            }
        }
        
        // Êé•Á∂ö„Çπ„ÉÜ„Éº„Çø„Çπ„ÅÆÊõ¥Êñ∞
        function updateConnectionStatus(connected, message = '') {
            isConnected = connected;
            
            if (connected) {
                statusDot.classList.remove('disconnected');
                statusText.textContent = 'Êé•Á∂öÊ∏à„Åø';
                connectionStatus.innerHTML = `<div class="connection-message connection-success">${message || 'FastServer API„Å´Ê≠£Â∏∏„Å´Êé•Á∂ö„Åï„Çå„Åæ„Åó„Åü'}</div>`;
                
                // Ëá™ÂãïÊõ¥Êñ∞„ÅÆË®≠ÂÆö
                setupAutoRefresh();
            } else {
                statusDot.classList.add('disconnected');
                statusText.textContent = 'Êé•Á∂ö„Å™„Åó';
                connectionStatus.innerHTML = `<div class="connection-message connection-error">${message || 'FastServer API„Å´Êé•Á∂ö„Åß„Åç„Åæ„Åõ„Çì'}</div>`;
                
                // Ëá™ÂãïÊõ¥Êñ∞„ÇíÂÅúÊ≠¢
                if (refreshIntervalId) {
                    clearInterval(refreshIntervalId);
                }
            }
            
            connectionStatus.style.display = 'block';
        }
        
        // Êé•Á∂ö„ÉÜ„Çπ„Éà
        async function testConnection() {
            try {
                const data = await apiRequest('/check_alive');
                updateConnectionStatus(true, `API„Çµ„Éº„Éê„Éº„ÅØÁ®ºÂÉç‰∏≠„Åß„Åô (Á®ºÂÉçÊôÇÈñì: ${data.uptime})`);
                addLogEntry('system', 'success', 'API„Çµ„Éº„Éê„Éº„Å´Ê≠£Â∏∏„Å´Êé•Á∂ö„Åó„Åæ„Åó„Åü');
            } catch (error) {
                updateConnectionStatus(false, error.message);
                addLogEntry('system', 'error', `API„Çµ„Éº„Éê„Éº„Å∏„ÅÆÊé•Á∂ö„Å´Â§±Êïó: ${error.message}`);
            }
        }
        
        // Êìç‰Ωú„É≠„Ç∞„ÅÆÁÆ°ÁêÜ
        function loadOperationLogs() {
            const savedLogs = localStorage.getItem('fastserver-operation-logs');
            if (savedLogs) {
                operationLogs = JSON.parse(savedLogs);
            } else {
                operationLogs = [];
                // ÂàùÊúü„É≠„Ç∞„Ç®„É≥„Éà„É™„ÇíËøΩÂä†
                addLogEntry('system', 'info', '„Çµ„Éº„Éê„Éº„Éë„Éç„É´„ÇíËµ∑Âãï„Åó„Åæ„Åó„Åü');
            }
            renderLogs();
        }
        
        function saveOperationLogs() {
            // ÊúÄÊñ∞1000‰ª∂„ÅÆ„Åø‰øùÂ≠ò
            const logsToSave = operationLogs.slice(-1000);
            localStorage.setItem('fastserver-operation-logs', JSON.stringify(logsToSave));
        }
        
        function addLogEntry(category, type, message, serverId = null) {
            const timestamp = new Date().toISOString();
            const logEntry = {
                id: Date.now() + Math.random().toString(36).substr(2, 9),
                timestamp,
                category,
                type,
                message,
                serverId
            };
            
            operationLogs.push(logEntry);
            saveOperationLogs();
            
            // „É≠„Ç∞„Çø„Éñ„Åå„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å™Â†¥Âêà„ÅÆ„Åø„É™„Ç¢„É´„Çø„Ç§„É†Êõ¥Êñ∞
            if (document.getElementById('logs-tab').classList.contains('active')) {
                renderLogs();
            }
            
            // „Ç≥„É≥„ÇΩ„Éº„É´„Å´„ÇÇÂá∫ÂäõÔºà„Éá„Éê„ÉÉ„Ç∞Áî®Ôºâ
            console.log(`[${timestamp}] ${category.toUpperCase()}.${type.toUpperCase()}: ${message}`);
        }
        
        function renderLogs() {
            // „Åô„Åπ„Å¶„ÅÆ„É≠„Ç∞„Ç≥„É≥„ÉÜ„Éä„Çí„ÇØ„É™„Ç¢
            document.querySelectorAll('.log-container').forEach(container => {
                container.innerHTML = '';
            });
            
            if (operationLogs.length === 0) {
                document.querySelectorAll('.log-container').forEach(container => {
                    container.innerHTML = '<p>„É≠„Ç∞„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>';
                });
                return;
            }
            
            // Êñ∞„Åó„ÅÑÈ†Ü„Å´Ë°®Á§∫
            const reversedLogs = [...operationLogs].reverse();
            
            // ÂêÑ„Ç´„ÉÜ„Ç¥„É™„ÅÆ„É≠„Ç∞„Çí„Éï„Ç£„É´„Çø„É™„É≥„Ç∞„Åó„Å¶Ë°®Á§∫
            const categories = ['all', 'server', 'file', 'command', 'system'];
            
            categories.forEach(category => {
                const container = document.getElementById(`log-container-${category}`);
                let filteredLogs = reversedLogs;
                
                if (category !== 'all') {
                    filteredLogs = reversedLogs.filter(log => log.category === category);
                }
                
                if (filteredLogs.length === 0) {
                    container.innerHTML = '<p>„Åì„ÅÆ„Ç´„ÉÜ„Ç¥„É™„ÅÆ„É≠„Ç∞„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì</p>';
                    return;
                }
                
                filteredLogs.forEach(log => {
                    const logEntry = document.createElement('div');
                    logEntry.className = `log-entry log-type-${log.type}`;
                    
                    const date = new Date(log.timestamp);
                    const timeString = date.toLocaleString('ja-JP');
                    
                    let serverInfo = '';
                    if (log.serverId) {
                        serverInfo = `<span class="log-server">${log.serverId}</span>`;
                    }
                    
                    logEntry.innerHTML = `
                        <div class="log-timestamp">${timeString}</div>
                        <div class="log-message">${serverInfo}${log.message}</div>
                    `;
                    
                    container.appendChild(logEntry);
                });
            });
            
            // ÊúÄÊñ∞„ÅÆ„É≠„Ç∞„Å´„Çπ„ÇØ„É≠„Éº„É´
            document.querySelectorAll('.log-container').forEach(container => {
                container.scrollTop = 0;
            });
        }
        
        function clearLogs() {
            if (confirm('„Åô„Åπ„Å¶„ÅÆÊìç‰Ωú„É≠„Ç∞„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü„Åì„ÅÆÊìç‰Ωú„ÅØÂÖÉ„Å´Êàª„Åõ„Åæ„Åõ„Çì„ÄÇ')) {
                operationLogs = [];
                saveOperationLogs();
                renderLogs();
                addLogEntry('system', 'info', 'Êìç‰Ωú„É≠„Ç∞„Çí„ÇØ„É™„Ç¢„Åó„Åæ„Åó„Åü');
            }
        }
        
        function exportLogs() {
            const dataStr = JSON.stringify(operationLogs, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `fastserver-logs-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            addLogEntry('system', 'info', 'Êìç‰Ωú„É≠„Ç∞„Çí„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Åó„Åæ„Åó„Åü');
        }
        
        // „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„ÅÆË™≠„ÅøËæº„Åø
        async function loadDashboard() {
            if (!isConnected) return;
            
            try {
                const data = await apiRequest('/servers');
                updateDashboardStats(data.servers);
                renderDashboardServers(data.servers);
                addLogEntry('system', 'info', '„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü');
            } catch (error) {
                // „Ç®„É©„Éº„ÅØapiRequestÂÜÖ„ÅßÂá¶ÁêÜÊ∏à„Åø
            }
        }
        
        // „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÁµ±Ë®à„ÅÆÊõ¥Êñ∞
        function updateDashboardStats(servers) {
            const totalServers = servers.length;
            const runningServers = servers.filter(s => s.status === 'RUNNING').length;
            
            document.getElementById('total-servers').textContent = totalServers;
            document.getElementById('running-servers').textContent = runningServers;
            
            // „Éó„É¨„Ç§„É§„ÉºÊï∞„Å®„Ç∏„Éß„ÉñÊï∞„ÅØ‰ªÆ„ÅÆÂÄ§ÔºàÂÆüÈöõ„ÅÆAPI„Åå„ÅÇ„Çå„Å∞ÂÆüË£ÖÔºâ
            document.getElementById('total-players').textContent = '0';
            document.getElementById('active-jobs').textContent = '0';
        }
        
        // „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Çµ„Éº„Éê„Éº‰∏ÄË¶ß„ÅÆÊèèÁîª
        function renderDashboardServers(servers) {
            dashboardServerListEl.innerHTML = '';
            
            if (servers.length === 0) {
                dashboardServerListEl.innerHTML = '<p>„Çµ„Éº„Éê„Éº„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì</p>';
                return;
            }
            
            servers.forEach(server => {
                const serverCard = document.createElement('div');
                serverCard.className = 'server-card card';
                
                const statusClass = `server-status status-${server.status.toLowerCase()}`;
                
                serverCard.innerHTML = `
                    <div class="card-body">
                        <div class="server-info">
                            <div class="server-name">${server.name}</div>
                            <div class="server-detail">
                                <span>„Çπ„ÉÜ„Éº„Çø„Çπ:</span>
                                <span class="${statusClass}">${server.status}</span>
                            </div>
                            <div class="server-detail">
                                <span>„Éê„Éº„Ç∏„Éß„É≥:</span>
                                <span>${server.version}</span>
                            </div>
                        </div>
                        <div class="server-actions">
                            <button class="btn btn-primary btn-sm" data-server-id="${server.id}" data-action="detail">Ë©≥Á¥∞</button>
                            <button class="btn btn-success btn-sm" data-server-id="${server.id}" data-action="start" ${server.status === 'RUNNING' ? 'disabled' : ''}>Ëµ∑Âãï</button>
                            <button class="btn btn-warning btn-sm" data-server-id="${server.id}" data-action="restart" ${server.status !== 'RUNNING' ? 'disabled' : ''}>ÂÜçËµ∑Âãï</button>
                            <button class="btn btn-danger btn-sm" data-server-id="${server.id}" data-action="stop" ${server.status !== 'RUNNING' ? 'disabled' : ''}>ÂÅúÊ≠¢</button>
                        </div>
                    </div>
                `;
                
                dashboardServerListEl.appendChild(serverCard);
            });
            
            // „Çµ„Éº„Éê„Éº„Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥„ÅÆ„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
            dashboardServerListEl.querySelectorAll('[data-action]').forEach(button => {
                button.addEventListener('click', handleServerAction);
            });
        }
        
        // API„É™„ÇØ„Ç®„Çπ„ÉàÈñ¢Êï∞
        async function apiRequest(endpoint, options = {}) {
            if (!API_KEY) {
                throw new Error('API„Ç≠„Éº„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì');
            }
            
            const url = `${API_BASE_URL}${endpoint}`;
            const headers = {
                'Authorization': `Bearer ${API_KEY}`,
                'Content-Type': 'application/json',
                ...options.headers
            };
            
            try {
                const response = await fetch(url, { ...options, headers });
                
                if (!response.ok) {
                    if (response.status === 401) {
                        throw new Error('Ë™çË®º„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇAPI„Ç≠„Éº„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                    } else if (response.status === 403) {
                        throw new Error('API„ÅåÁÑ°ÂäπÂåñ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô');
                    } else if (response.status === 404) {
                        throw new Error('API„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');
                    } else {
                        throw new Error(`API„Ç®„É©„Éº: ${response.status}`);
                    }
                }
                
                return await response.json();
            } catch (error) {
                console.error('API request failed:', error);
                showAlert('API„É™„ÇØ„Ç®„Çπ„Éà„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: ' + error.message, 'error');
                throw error;
            }
        }
        
        // „Çµ„Éº„Éê„Éº‰∏ÄË¶ß„ÅÆË™≠„ÅøËæº„Åø
        async function loadServers() {
            if (!isConnected) return;
            
            try {
                const data = await apiRequest('/servers');
                renderServers(data.servers);
                updateServerSelects(data.servers);
                addLogEntry('server', 'info', '„Çµ„Éº„Éê„Éº‰∏ÄË¶ß„ÇíÂèñÂæó„Åó„Åæ„Åó„Åü');
            } catch (error) {
                // „Ç®„É©„Éº„ÅØapiRequestÂÜÖ„ÅßÂá¶ÁêÜÊ∏à„Åø
            }
        }
        
        // „Çµ„Éº„Éê„Éº‰∏ÄË¶ß„ÅÆÊèèÁîª
        function renderServers(servers) {
            serverListEl.innerHTML = '';
            
            if (servers.length === 0) {
                serverListEl.innerHTML = '<p>„Çµ„Éº„Éê„Éº„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì</p>';
                return;
            }
            
            servers.forEach(server => {
                const serverCard = document.createElement('div');
                serverCard.className = 'server-card card';
                
                const statusClass = `server-status status-${server.status.toLowerCase()}`;
                
                serverCard.innerHTML = `
                    <div class="card-body">
                        <div class="server-info">
                            <div class="server-name">${server.name}</div>
                            <div class="server-detail">
                                <span>„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢:</span>
                                <span>${server.software}</span>
                            </div>
                            <div class="server-detail">
                                <span>„Éê„Éº„Ç∏„Éß„É≥:</span>
                                <span>${server.version}</span>
                            </div>
                            <div class="server-detail">
                                <span>„Çπ„ÉÜ„Éº„Çø„Çπ:</span>
                                <span class="${statusClass}">${server.status}</span>
                            </div>
                        </div>
                        <div class="server-actions">
                            <button class="btn btn-primary btn-sm" data-server-id="${server.id}" data-action="detail">Ë©≥Á¥∞</button>
                            <button class="btn btn-success btn-sm" data-server-id="${server.id}" data-action="start" ${server.status === 'RUNNING' ? 'disabled' : ''}>Ëµ∑Âãï</button>
                            <button class="btn btn-warning btn-sm" data-server-id="${server.id}" data-action="restart" ${server.status !== 'RUNNING' ? 'disabled' : ''}>ÂÜçËµ∑Âãï</button>
                            <button class="btn btn-danger btn-sm" data-server-id="${server.id}" data-action="stop" ${server.status !== 'RUNNING' ? 'disabled' : ''}>ÂÅúÊ≠¢</button>
                        </div>
                    </div>
                `;
                
                serverListEl.appendChild(serverCard);
            });
            
            // „Çµ„Éº„Éê„Éº„Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥„ÅÆ„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
            document.querySelectorAll('[data-action]').forEach(button => {
                button.addEventListener('click', handleServerAction);
            });
        }
        
        // „Çµ„Éº„Éê„Éº„Çª„É¨„ÇØ„Éà„Éú„ÉÉ„ÇØ„Çπ„ÅÆÊõ¥Êñ∞
        function updateServerSelects(servers) {
            const consoleSelect = document.getElementById('console-server-select');
            const filesSelect = document.getElementById('files-server-select');
            const playersSelect = document.getElementById('players-server-select');
            
            // Êó¢Â≠ò„ÅÆ„Ç™„Éó„Ç∑„Éß„É≥„Çí„ÇØ„É™„Ç¢ÔºàÊúÄÂàù„ÅÆ„Ç™„Éó„Ç∑„Éß„É≥„ÇíÈô§„ÅèÔºâ
            while (consoleSelect.children.length > 1) {
                consoleSelect.removeChild(consoleSelect.lastChild);
            }
            while (filesSelect.children.length > 1) {
                filesSelect.removeChild(filesSelect.lastChild);
            }
            while (playersSelect.children.length > 1) {
                playersSelect.removeChild(playersSelect.lastChild);
            }
            
            // „Çµ„Éº„Éê„Éº„Ç™„Éó„Ç∑„Éß„É≥„ÇíËøΩÂä†
            servers.forEach(server => {
                const option = document.createElement('option');
                option.value = server.id;
                option.textContent = server.name;
                
                consoleSelect.appendChild(option.cloneNode(true));
                filesSelect.appendChild(option.cloneNode(true));
                playersSelect.appendChild(option);
            });
        }
        
        // „Çµ„Éº„Éê„Éº„Ç¢„ÇØ„Ç∑„Éß„É≥„ÅÆÂá¶ÁêÜ
        async function handleServerAction(event) {
            const serverId = event.target.dataset.serverId;
            const action = event.target.dataset.action;
            
            if (action === 'detail') {
                showServerDetail(serverId);
                return;
            }
            
            try {
                let endpoint;
                let successMessage;
                let logMessage;
                
                switch (action) {
                    case 'start':
                        endpoint = `/servers/${serverId}/start`;
                        successMessage = '„Çµ„Éº„Éê„Éº„ÇíËµ∑Âãï„Åó„Åæ„Åó„Åü';
                        logMessage = `„Çµ„Éº„Éê„Éº "${serverId}" „ÇíËµ∑Âãï„Åó„Åæ„Åó„Åü`;
                        break;
                    case 'stop':
                        endpoint = `/servers/${serverId}/stop`;
                        successMessage = '„Çµ„Éº„Éê„Éº„ÇíÂÅúÊ≠¢„Åó„Åæ„Åó„Åü';
                        logMessage = `„Çµ„Éº„Éê„Éº "${serverId}" „ÇíÂÅúÊ≠¢„Åó„Åæ„Åó„Åü`;
                        break;
                    case 'restart':
                        endpoint = `/servers/${serverId}/restart`;
                        successMessage = '„Çµ„Éº„Éê„Éº„ÇíÂÜçËµ∑Âãï„Åó„Åæ„Åó„Åü';
                        logMessage = `„Çµ„Éº„Éê„Éº "${serverId}" „ÇíÂÜçËµ∑Âãï„Åó„Åæ„Åó„Åü`;
                        break;
                }
                
                await apiRequest(endpoint, { method: 'POST' });
                showAlert(successMessage, 'success');
                addLogEntry('server', 'success', logMessage, serverId);
                
                // „Çµ„Éº„Éê„Éº„É™„Çπ„Éà„ÇíÊõ¥Êñ∞
                setTimeout(() => {
                    loadServers();
                    loadDashboard();
                }, 1000);
            } catch (error) {
                addLogEntry('server', 'error', `„Çµ„Éº„Éê„ÉºÊìç‰Ωú„Å´Â§±Êïó: ${error.message}`, serverId);
                // „Ç®„É©„Éº„ÅØapiRequestÂÜÖ„ÅßÂá¶ÁêÜÊ∏à„Åø
            }
        }
        
        // „Çµ„Éº„Éê„ÉºË©≥Á¥∞„ÅÆË°®Á§∫
        async function showServerDetail(serverId) {
            try {
                const data = await apiRequest(`/servers/${serverId}`);
                
                modalServerName.textContent = data.servername;
                
                const statusClass = `server-status status-${data.status.toLowerCase()}`;
                
                modalServerInfo.innerHTML = `
                    <div class="server-detail">
                        <span>ID:</span>
                        <span>${data.id}</span>
                    </div>
                    <div class="server-detail">
                        <span>„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢:</span>
                        <span>${data.software}</span>
                    </div>
                    <div class="server-detail">
                        <span>„Éê„Éº„Ç∏„Éß„É≥:</span>
                        <span>${data.version}</span>
                    </div>
                    <div class="server-detail">
                        <span>„Çπ„ÉÜ„Éº„Çø„Çπ:</span>
                        <span class="${statusClass}">${data.status}</span>
                    </div>
                    <div class="server-detail">
                        <span>„Éë„Çπ:</span>
                        <span>${data.serverpath}</span>
                    </div>
                `;
                
                // „Éú„Çø„É≥„ÅÆÁä∂ÊÖã„ÇíË®≠ÂÆö
                modalStartBtn.disabled = data.status === 'RUNNING';
                modalRestartBtn.disabled = data.status !== 'RUNNING';
                modalStopBtn.disabled = data.status !== 'RUNNING';
                
                // „Éú„Çø„É≥„ÅÆ„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÇíË®≠ÂÆö
                modalStartBtn.onclick = () => handleServerAction({ target: { dataset: { serverId: serverId, action: 'start' } } });
                modalRestartBtn.onclick = () => handleServerAction({ target: { dataset: { serverId: serverId, action: 'restart' } } });
                modalStopBtn.onclick = () => handleServerAction({ target: { dataset: { serverId: serverId, action: 'stop' } } });
                
                serverDetailModal.style.display = 'flex';
                
                addLogEntry('server', 'info', `„Çµ„Éº„Éê„Éº "${serverId}" „ÅÆË©≥Á¥∞„ÇíË°®Á§∫`, serverId);
            } catch (error) {
                // „Ç®„É©„Éº„ÅØapiRequestÂÜÖ„ÅßÂá¶ÁêÜÊ∏à„Åø
            }
        }
        
        // „Ç≥„É≥„ÇΩ„Éº„É´„ÅÆÂàùÊúüÂåñ
        function initConsole() {
            const consoleServerSelect = document.getElementById('console-server-select');
            
            consoleServerSelect.addEventListener('change', () => {
                const serverId = consoleServerSelect.value;
                
                // Êó¢Â≠ò„ÅÆ„Ç≥„É≥„ÇΩ„Éº„É´Áõ£Ë¶ñ„ÇíÂÅúÊ≠¢
                if (consoleInterval) {
                    clearInterval(consoleInterval);
                    consoleInterval = null;
                }
                
                if (serverId) {
                    currentServerId = serverId;
                    consoleInputEl.disabled = false;
                    sendCommandBtn.disabled = false;
                    
                    // „Ç≥„É≥„ÇΩ„Éº„É´Âá∫Âäõ„ÇíË™≠„ÅøËæº„Åø
                    loadConsoleOutput(serverId);
                    
                    // ÂÆöÊúüÁöÑ„Å´„Ç≥„É≥„ÇΩ„Éº„É´Âá∫Âäõ„ÇíÊõ¥Êñ∞
                    consoleInterval = setInterval(() => {
                        loadConsoleOutput(serverId);
                    }, 3000);
                    
                    addLogEntry('system', 'info', `„Ç≥„É≥„ÇΩ„Éº„É´„Çí„Çµ„Éº„Éê„Éº "${serverId}" „Å´Êé•Á∂ö`, serverId);
                } else {
                    currentServerId = null;
                    consoleInputEl.disabled = true;
                    sendCommandBtn.disabled = true;
                    consoleOutputEl.innerHTML = '<div class="console-line">„Çµ„Éº„Éê„Éº„ÇíÈÅ∏Êäû„Åô„Çã„Å®„Ç≥„É≥„ÇΩ„Éº„É´Âá∫Âäõ„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô</div>';
                }
            });
            
            // „Ç≥„Éû„É≥„ÉâÈÄÅ‰ø°
            sendCommandBtn.addEventListener('click', sendCommand);
            consoleInputEl.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendCommand();
                }
            });
        }
        
        // „Ç≥„É≥„ÇΩ„Éº„É´Âá∫Âäõ„ÅÆË™≠„ÅøËæº„Åø
        async function loadConsoleOutput(serverId) {
            try {
                const data = await apiRequest(`/servers/${serverId}/console/tail?lines=100`);
                
                consoleOutputEl.innerHTML = '';
                data.log.forEach(line => {
                    const lineEl = document.createElement('div');
                    lineEl.className = 'console-line';
                    lineEl.textContent = line;
                    consoleOutputEl.appendChild(lineEl);
                });
                
                // ÊúÄÊñ∞„ÅÆË°å„Å´„Çπ„ÇØ„É≠„Éº„É´
                consoleOutputEl.scrollTop = consoleOutputEl.scrollHeight;
            } catch (error) {
                // „Ç®„É©„Éº„ÅØapiRequestÂÜÖ„ÅßÂá¶ÁêÜÊ∏à„Åø
            }
        }
        
        // „Ç≥„Éû„É≥„ÉâÈÄÅ‰ø°
        async function sendCommand() {
            const command = consoleInputEl.value.trim();
            
            if (!command || !currentServerId) {
                return;
            }
            
            try {
                await apiRequest(`/servers/${currentServerId}/command`, {
                    method: 'POST',
                    body: JSON.stringify({ command })
                });
                
                consoleInputEl.value = '';
                showAlert('„Ç≥„Éû„É≥„Éâ„ÇíÈÄÅ‰ø°„Åó„Åæ„Åó„Åü', 'success');
                addLogEntry('command', 'info', `„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å: ${command}`, currentServerId);
                
                // „Ç≥„É≥„ÇΩ„Éº„É´Âá∫Âäõ„ÇíÊõ¥Êñ∞
                setTimeout(() => loadConsoleOutput(currentServerId), 500);
            } catch (error) {
                addLogEntry('command', 'error', `„Ç≥„Éû„É≥„ÉâÂÆüË°å„Å´Â§±Êïó: ${error.message}`, currentServerId);
                // „Ç®„É©„Éº„ÅØapiRequestÂÜÖ„ÅßÂá¶ÁêÜÊ∏à„Åø
            }
        }
        
        // „Éï„Ç°„Ç§„É´ÁÆ°ÁêÜ„ÅÆÂàùÊúüÂåñ
        function initFiles() {
            const filesServerSelect = document.getElementById('files-server-select');
            const refreshFilesBtn = document.getElementById('refresh-files');
            
            filesServerSelect.addEventListener('change', () => {
                const serverId = filesServerSelect.value;
                
                if (serverId) {
                    currentServerId = serverId;
                    currentPath = '';
                    loadFiles(serverId, '');
                    addLogEntry('file', 'info', `„Éï„Ç°„Ç§„É´„Éñ„É©„Ç¶„Ç∂„Çí„Çµ„Éº„Éê„Éº "${serverId}" „Å´Êé•Á∂ö`, serverId);
                } else {
                    currentServerId = null;
                    currentPath = '';
                    fileListEl.innerHTML = '';
                }
            });
            
            refreshFilesBtn.addEventListener('click', () => {
                if (currentServerId) {
                    loadFiles(currentServerId, currentPath);
                    addLogEntry('file', 'info', `„Éï„Ç°„Ç§„É´‰∏ÄË¶ß„ÇíÊõ¥Êñ∞: ${currentPath || '/'}`, currentServerId);
                }
            });
        }
        
        // „Éï„Ç°„Ç§„É´‰∏ÄË¶ß„ÅÆË™≠„ÅøËæº„Åø
        async function loadFiles(serverId, path) {
            try {
                const query = path ? `?path=${encodeURIComponent(path)}` : '';
                const data = await apiRequest(`/servers/${serverId}/files/list${query}`);
                
                renderFiles(data.items, data.path);
                addLogEntry('file', 'info', `„Éá„Ç£„É¨„ÇØ„Éà„É™„ÇíË°®Á§∫: ${path || '/'}`, serverId);
            } catch (error) {
                addLogEntry('file', 'error', `„Éï„Ç°„Ç§„É´‰∏ÄË¶ß„ÅÆÂèñÂæó„Å´Â§±Êïó: ${error.message}`, serverId);
                // „Ç®„É©„Éº„ÅØapiRequestÂÜÖ„ÅßÂá¶ÁêÜÊ∏à„Åø
            }
        }
        
        // „Éï„Ç°„Ç§„É´‰∏ÄË¶ß„ÅÆÊèèÁîª
        function renderFiles(items, path) {
            fileListEl.innerHTML = '';
            
            // Ë¶™„Éá„Ç£„É¨„ÇØ„Éà„É™„Å∏„ÅÆ„É™„É≥„ÇØÔºà„É´„Éº„Éà„Åß„Å™„ÅÑÂ†¥ÂêàÔºâ
            if (path) {
                const parentItem = document.createElement('div');
                parentItem.className = 'file-item';
                parentItem.innerHTML = `
                    <div class="file-icon">üìÅ</div>
                    <div class="file-name">..</div>
                    <div class="file-size">Ë¶™„Éá„Ç£„É¨„ÇØ„Éà„É™</div>
                `;
                
                parentItem.addEventListener('click', () => {
                    const parentPath = path.split('/').slice(0, -1).join('/');
                    loadFiles(currentServerId, parentPath);
                });
                
                fileListEl.appendChild(parentItem);
            }
            
            items.forEach(item => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                
                const icon = item.type === 'directory' ? 'üìÅ' : 'üìÑ';
                
                fileItem.innerHTML = `
                    <div class="file-icon">${icon}</div>
                    <div class="file-name">${item.name}</div>
                    <div class="file-size">${formatFileSize(item.size)}</div>
                `;
                
                fileItem.addEventListener('click', () => {
                    if (item.type === 'directory') {
                        const newPath = path ? `${path}/${item.name}` : item.name;
                        loadFiles(currentServerId, newPath);
                    } else {
                        // „Éï„Ç°„Ç§„É´„ÅÆÂ†¥Âêà„ÅØ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
                        downloadFile(currentServerId, path ? `${path}/${item.name}` : item.name);
                        addLogEntry('file', 'info', `„Éï„Ç°„Ç§„É´„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ: ${item.name}`, currentServerId);
                    }
                });
                
                fileListEl.appendChild(fileItem);
            });
        }
        
        // „Éï„Ç°„Ç§„É´„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
        function downloadFile(serverId, filePath) {
            const url = `${API_BASE_URL}/servers/${serverId}/files/download?path=${encodeURIComponent(filePath)}`;
            const link = document.createElement('a');
            link.href = url;
            link.setAttribute('download', '');
            link.style.display = 'none';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // „Éï„Ç°„Ç§„É´„Çµ„Ç§„Ç∫„ÅÆ„Éï„Ç©„Éº„Éû„ÉÉ„Éà
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 B';
            
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // „Éó„É¨„Ç§„É§„ÉºÁÆ°ÁêÜ„ÅÆË™≠„ÅøËæº„Åø
        async function loadPlayers() {
            const playersServerSelect = document.getElementById('players-server-select');
            const serverId = playersServerSelect.value;
            
            if (!serverId) {
                playerListEl.innerHTML = '<p>„Çµ„Éº„Éê„Éº„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>';
                return;
            }
            
            try {
                // ‰ªÆ„ÅÆ„Éó„É¨„Ç§„É§„Éº„Éá„Éº„ÇøÔºàÂÆüÈöõ„ÅÆAPI„Åå„ÅÇ„Çå„Å∞ÂÆüË£ÖÔºâ
                const players = [
                    { name: 'Player1', uuid: '12345', online: true },
                    { name: 'Player2', uuid: '67890', online: false },
                    { name: 'Player3', uuid: 'abcde', online: true }
                ];
                
                renderPlayers(players);
                addLogEntry('system', 'info', `„Éó„É¨„Ç§„É§„Éº„É™„Çπ„Éà„ÇíÂèñÂæó: ${serverId}`, serverId);
            } catch (error) {
                addLogEntry('system', 'error', `„Éó„É¨„Ç§„É§„Éº„É™„Çπ„Éà„ÅÆÂèñÂæó„Å´Â§±Êïó: ${error.message}`, serverId);
            }
        }
        
        // „Éó„É¨„Ç§„É§„Éº‰∏ÄË¶ß„ÅÆÊèèÁîª
        function renderPlayers(players) {
            playerListEl.innerHTML = '';
            
            if (players.length === 0) {
                playerListEl.innerHTML = '<p>„Éó„É¨„Ç§„É§„Éº„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì</p>';
                return;
            }
            
            players.forEach(player => {
                const playerCard = document.createElement('div');
                playerCard.className = 'player-card';
                
                const status = player.online ? '„Ç™„É≥„É©„Ç§„É≥' : '„Ç™„Éï„É©„Ç§„É≥';
                const statusClass = player.online ? 'status-running' : 'status-stopped';
                
                playerCard.innerHTML = `
                    <div class="player-name">${player.name}</div>
                    <div class="player-info">
                        <span class="${statusClass}">${status}</span>
                    </div>
                `;
                
                playerListEl.appendChild(playerCard);
            });
        }
        
        // „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÁÆ°ÁêÜ„ÅÆË™≠„ÅøËæº„Åø
        async function loadBackups() {
            try {
                // ‰ªÆ„ÅÆ„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Éá„Éº„ÇøÔºàÂÆüÈöõ„ÅÆAPI„Åå„ÅÇ„Çå„Å∞ÂÆüË£ÖÔºâ
                const backups = [
                    { name: 'backup-2023-11-01.zip', size: 1024000, date: '2023-11-01 12:00:00' },
                    { name: 'backup-2023-10-28.zip', size: 980000, date: '2023-10-28 12:00:00' },
                    { name: 'backup-2023-10-25.zip', size: 950000, date: '2023-10-25 12:00:00' }
                ];
                
                renderBackups(backups);
                addLogEntry('system', 'info', '„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„É™„Çπ„Éà„ÇíÂèñÂæó„Åó„Åæ„Åó„Åü');
            } catch (error) {
                addLogEntry('system', 'error', `„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„É™„Çπ„Éà„ÅÆÂèñÂæó„Å´Â§±Êïó: ${error.message}`);
            }
        }
        
        // „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰∏ÄË¶ß„ÅÆÊèèÁîª
        function renderBackups(backups) {
            backupListEl.innerHTML = '';
            
            if (backups.length === 0) {
                backupListEl.innerHTML = '<p>„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì</p>';
                return;
            }
            
            backups.forEach(backup => {
                const backupCard = document.createElement('div');
                backupCard.className = 'backup-card';
                
                backupCard.innerHTML = `
                    <div class="backup-name">${backup.name}</div>
                    <div class="backup-info">„Çµ„Ç§„Ç∫: ${formatFileSize(backup.size)}</div>
                    <div class="backup-info">‰ΩúÊàêÊó•: ${backup.date}</div>
                    <div class="server-actions">
                        <button class="btn btn-primary btn-sm" data-backup="${backup.name}">Âæ©ÂÖÉ</button>
                        <button class="btn btn-danger btn-sm" data-backup="${backup.name}">ÂâäÈô§</button>
                    </div>
                `;
                
                backupListEl.appendChild(backupCard);
            });
        }
        
        // „Ç∏„Éß„Éñ‰∏ÄË¶ß„ÅÆË™≠„ÅøËæº„Åø
        async function loadJobs() {
            try {
                const data = await apiRequest('/jobs');
                renderJobs(data.jobs);
                addLogEntry('system', 'info', '„Ç∏„Éß„Éñ‰∏ÄË¶ß„ÇíÂèñÂæó„Åó„Åæ„Åó„Åü');
            } catch (error) {
                // „Ç®„É©„Éº„ÅØapiRequestÂÜÖ„ÅßÂá¶ÁêÜÊ∏à„Åø
            }
        }
        
        // „Ç∏„Éß„Éñ‰∏ÄË¶ß„ÅÆÊèèÁîª
        function renderJobs(jobs) {
            jobsListEl.innerHTML = '';
            
            if (jobs.length === 0) {
                jobsListEl.innerHTML = '<p>ÂÆüË°å‰∏≠„ÅÆ„Ç∏„Éß„Éñ„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì</p>';
                return;
            }
            
            jobs.forEach(job => {
                const jobCard = document.createElement('div');
                jobCard.className = 'card';
                
                const statusClass = `server-status status-${job.status.toLowerCase()}`;
                
                jobCard.innerHTML = `
                    <div class="card-body">
                        <div class="server-info">
                            <div class="server-name">${job.type.toUpperCase()} „Ç∏„Éß„Éñ</div>
                            <div class="server-detail">
                                <span>„Çπ„ÉÜ„Éº„Çø„Çπ:</span>
                                <span class="${statusClass}">${job.status}</span>
                            </div>
                            <div class="server-detail">
                                <span>ÈÄ≤Êçó:</span>
                                <span>${job.progress || 0}%</span>
                            </div>
                            <div class="server-detail">
                                <span>Âá¶ÁêÜÊ∏à„Åø:</span>
                                <span>${formatFileSize(job.processed_bytes || 0)} / ${formatFileSize(job.total_bytes || 0)}</span>
                            </div>
                            <div class="server-detail">
                                <span>„ÇΩ„Éº„Çπ:</span>
                                <span>${job.source}</span>
                            </div>
                            <div class="server-detail">
                                <span>„Çø„Éº„Ç≤„ÉÉ„Éà:</span>
                                <span>${job.target}</span>
                            </div>
                        </div>
                        <div class="server-actions">
                            <button class="btn btn-danger btn-sm" data-job-id="${job.id}" data-action="cancel">„Ç≠„É£„É≥„Çª„É´</button>
                        </div>
                    </div>
                `;
                
                jobsListEl.appendChild(jobCard);
            });
            
            // „Ç∏„Éß„Éñ„Ç≠„É£„É≥„Çª„É´„Éú„Çø„É≥„ÅÆ„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
            document.querySelectorAll('[data-job-id]').forEach(button => {
                button.addEventListener('click', async (event) => {
                    const jobId = event.target.dataset.jobId;
                    
                    try {
                        await apiRequest(`/jobs/${jobId}/cancel`, { method: 'POST' });
                        showAlert('„Ç∏„Éß„Éñ„Çí„Ç≠„É£„É≥„Çª„É´„Åó„Åæ„Åó„Åü', 'success');
                        addLogEntry('system', 'warning', `„Ç∏„Éß„Éñ„Çí„Ç≠„É£„É≥„Çª„É´: ${jobId}`);
                        
                        // „Ç∏„Éß„Éñ„É™„Çπ„Éà„ÇíÊõ¥Êñ∞
                        setTimeout(loadJobs, 1000);
                    } catch (error) {
                        addLogEntry('system', 'error', `„Ç∏„Éß„Éñ„ÅÆ„Ç≠„É£„É≥„Çª„É´„Å´Â§±Êïó: ${error.message}`);
                        // „Ç®„É©„Éº„ÅØapiRequestÂÜÖ„ÅßÂá¶ÁêÜÊ∏à„Åø
                    }
                });
            });
        }
        
        // „É≠„Ç∞Èñ¢ÈÄ£„ÅÆÈñ¢Êï∞
        function loadLogs() {
            renderLogs();
        }
        
        // „ÇØ„Ç§„ÉÉ„ÇØ„Ç¢„ÇØ„Ç∑„Éß„É≥„ÅÆÂá¶ÁêÜ
        document.getElementById('quick-restart-all').addEventListener('click', () => {
            if (confirm('„Åô„Åπ„Å¶„ÅÆ„Çµ„Éº„Éê„Éº„ÇíÂÜçËµ∑Âãï„Åó„Åæ„Åô„ÅãÔºü')) {
                addLogEntry('system', 'warning', 'ÂÖ®„Çµ„Éº„Éê„ÉºÂÜçËµ∑Âãï„ÇíÂÆüË°å');
                showAlert('ÂÖ®„Çµ„Éº„Éê„ÉºÂÜçËµ∑Âãï„ÇíÈñãÂßã„Åó„Åæ„Åó„Åü', 'success');
            }
        });
        
        document.getElementById('quick-stop-all').addEventListener('click', () => {
            if (confirm('„Åô„Åπ„Å¶„ÅÆ„Çµ„Éº„Éê„Éº„ÇíÂÅúÊ≠¢„Åó„Åæ„Åô„ÅãÔºü')) {
                addLogEntry('system', 'warning', 'ÂÖ®„Çµ„Éº„Éê„ÉºÂÅúÊ≠¢„ÇíÂÆüË°å');
                showAlert('ÂÖ®„Çµ„Éº„Éê„ÉºÂÅúÊ≠¢„ÇíÈñãÂßã„Åó„Åæ„Åó„Åü', 'success');
            }
        });
        
        document.getElementById('quick-backup').addEventListener('click', () => {
            addLogEntry('system', 'info', '„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰ΩúÊàê„ÇíÈñãÂßã');
            showAlert('„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰ΩúÊàê„ÇíÈñãÂßã„Åó„Åæ„Åó„Åü', 'success');
        });
        
        document.getElementById('quick-cleanup').addEventListener('click', () => {
            if (confirm('Âè§„ÅÑ„É≠„Ç∞„Éï„Ç°„Ç§„É´„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü')) {
                addLogEntry('system', 'info', '„É≠„Ç∞„ÇØ„É™„É≥„Éä„ÉÉ„Éó„ÇíÂÆüË°å');
                showAlert('„É≠„Ç∞„ÇØ„É™„É≥„Éä„ÉÉ„Éó„ÇíÈñãÂßã„Åó„Åæ„Åó„Åü', 'success');
            }
        });
        
        // „Ç¢„É©„Éº„ÉàË°®Á§∫
        function showAlert(message, type) {
            const alertEl = document.createElement('div');
            alertEl.className = `alert alert-${type}`;
            alertEl.textContent = message;
            
            alertAreaEl.appendChild(alertEl);
            
            // 5ÁßíÂæå„Å´„Ç¢„É©„Éº„Éà„ÇíÂâäÈô§
            setTimeout(() => {
                alertEl.remove();
            }, 5000);
        }
        
        // „É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
        document.querySelectorAll('.close').forEach(closeBtn => {
            closeBtn.addEventListener('click', () => {
                serverDetailModal.style.display = 'none';
                settingsModal.style.display = 'none';
            });
        });
        
        // „É¢„Éº„ÉÄ„É´Â§ñ„Çí„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„Çã
        window.addEventListener('click', (event) => {
            if (event.target === serverDetailModal) {
                serverDetailModal.style.display = 'none';
            }
            if (event.target === settingsModal) {
                settingsModal.style.display = 'none';
            }
        });
        
        // Ë®≠ÂÆö„Éú„Çø„É≥„ÅÆ„Ç§„Éô„É≥„Éà
        document.getElementById('settings-btn').addEventListener('click', () => {
            settingsModal.style.display = 'flex';
            
            // „É¢„Éº„ÉÄ„É´„ÇíË°®Á§∫„Åó„Åü„Çâ„Çπ„ÇØ„É≠„Éº„É´‰ΩçÁΩÆ„Çí„É™„Çª„ÉÉ„Éà
            const modalBody = settingsModal.querySelector('.modal-body');
            modalBody.scrollTop = 0;
        });
        
        // Ë®≠ÂÆö‰øùÂ≠ò„Éú„Çø„É≥„ÅÆ„Ç§„Éô„É≥„Éà
        document.getElementById('save-settings-btn').addEventListener('click', saveSettings);
        
        // Ë®≠ÂÆö„Ç≠„É£„É≥„Çª„É´„Éú„Çø„É≥„ÅÆ„Ç§„Éô„É≥„Éà
        document.getElementById('cancel-settings-btn').addEventListener('click', () => {
            settingsModal.style.display = 'none';
        });
        
        // „É≠„Ç∞Èñ¢ÈÄ£„ÅÆ„Ç§„Éô„É≥„Éà
        document.getElementById('refresh-logs').addEventListener('click', loadLogs);
        document.getElementById('clear-logs').addEventListener('click', clearLogs);
        document.getElementById('export-logs').addEventListener('click', exportLogs);
        
        // „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÊõ¥Êñ∞„Éú„Çø„É≥
        document.getElementById('refresh-dashboard').addEventListener('click', loadDashboard);
        
        // „Éó„É¨„Ç§„É§„Éº„Çµ„Éº„Éê„ÉºÈÅ∏Êäû„ÅÆ„Ç§„Éô„É≥„Éà
        document.getElementById('players-server-select').addEventListener('change', loadPlayers);
        
        // „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰ΩúÊàê„Éú„Çø„É≥
        document.getElementById('create-backup').addEventListener('click', () => {
            addLogEntry('system', 'info', '„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰ΩúÊàê„ÇíÈñãÂßã');
            showAlert('„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰ΩúÊàê„ÇíÈñãÂßã„Åó„Åæ„Åó„Åü', 'success');
        });
        
        // ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', () => {
            // Ë®≠ÂÆö„ÅÆË™≠„ÅøËæº„Åø
            loadSettings();
            
            // „Çµ„Éº„Éê„Éº‰∏ÄË¶ß„ÅÆÊõ¥Êñ∞„Éú„Çø„É≥
            document.getElementById('refresh-servers').addEventListener('click', loadServers);
            
            // „Ç∏„Éß„Éñ‰∏ÄË¶ß„ÅÆÊõ¥Êñ∞„Éú„Çø„É≥
            document.getElementById('refresh-jobs').addEventListener('click', loadJobs);
        });
    </script>
</body>
</html>